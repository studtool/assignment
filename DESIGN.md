
# Проектирование системы

## Концептуальный дизайн

Для создания функциональной модели системы, отражающей основные функции и потоки информации наиболее наглядно использовать нотацию IDEF0. На рисунке 1 приведена концептуальная модель сервиса документов. На рисунках 2, 3 представлена декомпозиция функциональной модели сервиса.

![Alt text](https://github.com/studtool/assignment/blob/master/A0.png)

Рис. 1. Концептуальная модель подсистемы обработки документов

![Alt text](https://github.com/studtool/assignment/blob/master/A1-A3.PNG)

Рис. 2. Детализированная концептуальная модель подсистемы обработки документов

![Alt text](https://github.com/studtool/assignment/blob/master/IDEF3.png)

Рис. 3. Диаграмма изменения документа в нотации IDEF3

### Сценарии функционирования системы

#### Добавление документа

1. Пользователь создает документ и нажимает кнопку "Добавить документ".
2. Запрос на добавление документа отправляется на сервер.
3. Сервис авторизации выполняет проверку авторизации пользователя. В случае если пользователь авторизован выставляется заголовок, содержащий идентификатор пользователя, иначе генерируется сообщение об ошибке.
4. Сервис документов создает документ и генерирует сообщение об успешном завершении обработки запроса.
5. Фронтенд генерирует страницу с сообщением об успешном добавлении документа.

#### Чтение документа

1. Пользователь выбирает документ для чтения из списка и переходит по ссылке с именем данного документа.
2. Запрос на чтение документа отправляется на сервер.
3. Сервис авторизации выполняет проверку авторизации пользователя. В случае если пользователь авторизован выставляется заголовок, содержащий идентификатор пользователя.
4. Сервис документов проверяет наличие документа, в случае отсутствия генерируется сообщение об ошибке.
5. Сервис документов проверяет права пользователя на чтение документа, в случае отсутствия таковых генерируется сообщение об ошибке.
6. Сервис документов возвращает в ответе содержимое документа.
5. Фронтенд генерирует страницу с содержимым документа.

#### Удаление документа

1. Пользователь выбирает документ из списка и нажимает кнопку "Удалить".
2. Запрос на удаление документа отправляется на сервер.
3. Сервис авторизации выполняет проверку авторизации пользователя. В случае если пользователь авторизован выставляется заголовок, содержащий идентификатор пользователя, иначе генерируется сообщение об ошибке.
4. Сервис документов проверяет наличие документа, в случае отсутствия генерируется сообщение об ошибке.
5. Сервис документов проверяет права пользователя на удаление документа, в случае отсутствия таковых генерируется сообщение об ошибке.
6. Фронтенд генерирует страницу с сообщением об успешном удалении документа.

### Диаграммы прецедентов

![Alt text](https://github.com/studtool/assignment/blob/master/WithoutAuth.PNG)

![Alt text](https://github.com/studtool/assignment/blob/master/WithAuth.PNG)

### Спецификации сценариев

#### Сценарий регистрации пользователя

##### Нормальный ход сценария
| Действия актера | Отклик системы |
| --------------- | -------------- |
| Ввод допустимых адреса электронной почты и пароля. | Система выполняет валидацию данных. Отправляет запрос на сервер. Возвращается сообщение об успешной регистрации. |

##### Альтернативный ход сценария
| Действия актера | Отклик системы |
| --------------- | -------------- |
| Ввод недопустимого адреса электронной почты или пароля. | Система выполняет валидацию данных. Генерируется сообщение об ошибке. |

##### Альтернативный ход сценария
| Действия актера | Отклик системы |
| --------------- | -------------- |
| Ввод существующего адреса электронной почты и допустимого пароля. | Система выполняет валидацию данных. Отправляет запрос на сервер. Возвращается сообщение о том, что пользователь с таким адресом электронной почты уже зарегистрирован. |

## Логический дизайн

### Модель "Сущность - Связь"

![Alt text](https://github.com/studtool/assignment/blob/master/ER.png)

Модель "Сущность-Связь" (entity-relationship model, ER-модель) для сервиса досок

#### Спецификация сущностей

Сущность **"Пользователь"** представляет собой авторизованного пользователя системы. Атрибуты сущности:

| Имя атрибута | Тип атрибута | Описание атрибута |
| ---- | ---- | ---- |
| ID | text | Уникальный идентификатор пользователя в системе. |

Сущность **"Доска задач"**. Атрибуты сущности:

| Имя атрибута | Тип атрибута | Описание атрибута |
| ---- | ---- | ---- |
| ID | text | Уникальный идентификатор доски. |
| Предмет | text | Учебный предмет, для которого создана доска. |
| Название | text | Название доски задач. |
| Автор | text | Уникальный идентификатор пользователя, создавшего доску. |
| Список участников | array of text | Уникальные идентификаторы пользователей, имеющих право редактировать доску. |

Сущность **"Карточка задачи"**. Атрибуты сущности:

| Имя атрибута | Тип атрибута | Описание атрибута |
| ---- | ---- | ---- |
| ID | int | Уникальный идентификатор карточки в рамках доски. |
| Название | text | Название задачи. |
| Описание | text | Подробное описание задачи. |
| Дата сдачи | date | Дата, до которой задание должно быть выполнено. |

### Диаграмма деятельности

![Alt text](https://github.com/studtool/assignment/blob/master/AUTH.png)

Диаграмма деятельности для варианта использования "Авторизация" пользователя
